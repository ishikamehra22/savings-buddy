{% extends "base.html" %}
{% block content %}
<h3 class="text-center mb-4">➕ Add Expense</h3>

{% if messages %}
  {% for message in messages %}
    <div class="alert alert-success text-center">{{ message }}</div>
  {% endfor %}
{% endif %}

<form method="POST" class="mx-auto" style="max-width:600px;">
  {% csrf_token %}
  
  <div class="mb-3">
    <label for="category">Category</label>
    {{ form.category }}
  </div>

  <div class="mb-3" id="customCategoryField" style="display:none;">
    <label for="customCategory">Custom Category</label>
    <input type="text" name="custom_category" id="customCategory" class="form-control" placeholder="Enter custom category">
  </div>

  <div class="mb-3">
    <label for="amount">Amount</label>
    {{ form.amount }}
  </div>

  <div class="mb-3">
    <label for="date">Date</label>
    {{ form.date }}
  </div>

  <div class="mb-3">
    <label for="note">Note</label>
    {{ form.note }}
  </div>

  <div class="d-flex justify-content-between">
    <a href="{% url 'dashboard' %}" class="btn btn-secondary w-50 me-2">⬅ Back</a>
    <button type="submit" class="btn btn-primary w-50">Save Expense</button>
  </div>
</form>

<script>
  document.getElementById('category').addEventListener('change', function() {
    const customField = document.getElementById('customCategoryField');
    customField.style.display = this.value === 'Other' ? 'block' : 'none';
  });
</script>
{% endblock %}
